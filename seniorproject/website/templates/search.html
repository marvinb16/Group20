{% extends "base.html" %} {% block title %}Search Markets{% endblock %}


{% block content %}
    <form id="searchForm" action="/search" method="POST">
        <label for="zipcode">Enter Zip Code:</label>
        <input type="text" id="zipcode" name="zipcode">
        <label for="radius">Select Radius:</label>
        <select id="radius" name="radius">
            <option value="10">10 miles</option>
            <option value="20">20 miles</option>
            <option value="30">30 miles</option>
            <option value="50">50 miles</option>
            <option value="100">100 miles</option>
        </select>
        <button type="submit">Search</button>
    </form>

    <table id="resultsTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Location</th>
                <th>Website</th>
            </tr>
        </thead>
        <tbody id="results">
            {% if api_response and api_response.data %}
                {% for market in api_response.data %}
                    <tr>
                        <td>{{ market.listing_name }}</td>
                        <td>{{ market.location_address }}, {{ market.location_city }}, {{ market.location_state }}, {{ market.location_zipcode }}</td>
                        <td>
                            {% if market.media_website %}
                                <a href="{{ market.media_website }}" target="_blank">{{ market.media_website }}</a>
                            {% else %}
                                No website
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3">No data found.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
{% endblock %}